!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("KalixHeader",[],e):"object"==typeof exports?exports.KalixHeader=e():t.KalixHeader=e()}(this,function(){return function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=9)}([function(t,e,a){"use strict";var i=a(2),n=a(8);e.a={name:"KalixHeader",data:function(){return{userName:"",menuList:[],singleLogin:!0,themeValue:"",msgCount:0,menuIsOpen:!1,isShowAsideBtn:!1,isShowMessage:!1,isFlowCommand:!1}},props:{reqUrl:{type:String,default:""},params:{type:Object,default:function(){return{_dc:(new Date).getTime(),page:1,start:0,limit:25}}},logoutUrl:{type:String,default:""}},mounted:function(){var t=this;console.log("KalixHeader mounted"),window.onresize=function(){t._setAsideBtn()}},activated:function(){this.userName=i.a.get("user_name"),this.initMenu(),this.singleLogin&&this.checkLogin()},methods:{initMenu:function(){var t=this,e={};i.a.get("toolListData")&&(e=JSON.parse(i.a.get("toolListData"))),console.log("KalixSecondPage toolListData",e),a.i(n.a)(e)?this.reqUrl.length?this.$http.get(this.reqUrl,{params:this.params}).then(function(a){a&&a.data&&(console.log("[toolListData] data:",a.data),e=a.data,t.menuList=e,i.a.save("toolListData",JSON.stringify(e)),t._urlTransmit(e))}):console.log(" ===== this.reqUrl is Null! ===== "):(this.menuList=e,this._urlTransmit(e))},_urlTransmit:function(t){console.log("data.length:",t.length),console.log("data[0].id:",t[0].id),t.length&&t[0].id&&this.$router.push({path:"/"+t[0].id+"/"})},bindClass:function(t){return t},setTheme:function(t){t&&(this.themeValue=t)},onFlowCommand:function(t){console.log(" ===== 代办流程 ===== "),this.$router.push({path:"/oa/Task"})},onMsgClick:function(){this.$router.push({path:"/common/receiver"})},doLogout:function(){var t=this;this.$http.get(this.logoutUrl,{}).then(function(e){i.a.clear(),i.a._clearLocal(),t.$router.push({path:"/login"})}).catch(function(e){console.log(" ===== err ===== ",e),i.a.clear(),i.a._clearLocal(),t.$router.push({path:"/login"})})},handleCommand:function(t){switch(t){case"changeInfo":this.$emit("onClickUpdateUserInfo");break;case"changePwd":this.$emit("onClickChangePwd","");break;case"logout":this.doLogout()}},checkLogin:function(){var t=this;clearInterval(this.islogin),this.islogin=setInterval(function(){var e=i.a._getLocal("lastLoginTime"),a=i.a.get("lastLoginTime");null!==e&&a!==e&&(clearInterval(t.islogin),t.doLogout())},3e3)},styleObject:function(){console.log("this.formModel1",this.icon);var t={};return this.icon&&(t={backgroundImage:"url('"+this.icon+"')"}),t},onOpenMenu:function(t){this.isShowAsideBtn&&(this.menuIsOpen=t)},_setAsideBtn:function(){var t=this;setTimeout(function(){t.isShowAsideBtn=t.$refs.ulMenu.clientHeight>64},20)}}}},function(t,e,a){"use strict";var i=a(2);e.a={name:"KalixNavigate",props:{cacheTime:{type:Number,default:""},url:{type:String,default:""},menuChk:{default:!1}},data:function(){return{name:"kalixNav",currApp:"",currFun:"",activeName:"1",obj:{name:"aa"},treeData:[],clickedNode:null,flag:!0}},activated:function(){this.fetchData()},mounted:function(){},watch:{$route:function(t,e){"/"!==t.path&&"/login"!==t.path&&this.fetchData()}},methods:{fetchData:function(){var t=this;if(this.treeData=[],"login"!==this.$route.name){var e=new Date,a=e.getTime(),n={};if(this.currApp=this.$route.params.app,this.currFun=this.$route.params.fun||"",i.a.get("treeListData")&&(n=JSON.parse(i.a.get("treeListData"))),n.createDate&&n.createDate-a<this.cacheTime&&n[this.currApp])this.treeData=n[this.currApp],this.setItemShow();else{var o={_dc:a,node:"root"};this.flag&&(this.flag=!1,this.$http.get(this.url+this.currApp,{params:o}).then(function(e){t.flag=!0;var a=new Date;e.data&&401!==e.data.code&&(t.treeData=e.data,t.treeData.length&&(t.treeData.forEach(function(e){t.$set(e,"isShow",!1)}),n[t.currApp]=t.treeData,n.createDate=a.getTime(),t.setItemShow(),i.a.save("treeListData",JSON.stringify(n))))}))}}},setItemShow:function(){var t=this.currFun.toLowerCase();this.treeData.forEach(function(e){e.isShow=!1,e.children.find(function(e){return e.routeId.split("/").pop().toLowerCase()===t})&&(e.isShow=!0)})},bindClass:function(t){return t},showTree:function(t){console.log("KalixNavigate e:",t),this.clickedNode=t,this.treeData.forEach(function(e){e.isShow=e===t&&!e.isShow})},showIcon:function(t){return t?"el-icon-caret-bottom":"el-icon-caret-right"},selectItem:function(t){this.$router.push({path:"/"+this.currApp+"/"+t.routeId.split("/").pop()}),i.a.save("currentTreeListItem",JSON.stringify(t))},currentCls:function(t){return t.routeId.split("/").pop().toLowerCase()===this.currFun.toLowerCase()?"active":""}},components:{}}},function(t,e,a){"use strict";e.a={save:function(t,e){sessionStorage.setItem(t,e)},get:function(t){return sessionStorage.getItem(t)},clear:function(){sessionStorage.clear()},_saveLocal:function(t,e){localStorage.setItem(t,e)},_getLocal:function(t){return localStorage.getItem(t)},_removeLocal:function(t){localStorage.removeItem(t)},_clearLocal:function(){localStorage.clear()}}},function(t,e){function a(t,e){var a=t[1]||"",n=t[3];if(!n)return a;if(e&&"function"==typeof btoa){var o=i(n);return[a].concat(n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"})).concat([o]).join("\n")}return[a].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=a(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,a){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var o=this[n][0];"number"==typeof o&&(i[o]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&i[r[0]]||(a&&!r[2]?r[2]=a:a&&(r[2]="("+r[2]+") and ("+a+")"),e.push(r))}},e}},function(t,e,a){"use strict";function i(t,e,a,i,n,o,r,s){t=t||{};var l=typeof t.default;"object"!==l&&"function"!==l||(t=t.default);var c="function"==typeof t?t.options:t;e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId=o);var d;if(r?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=d):n&&(d=s?function(){n.call(this,this.$root.$options.shadowRoot)}:n),d)if(c.functional){c._injectStyles=d;var u=c.render;c.render=function(t,e){return d.call(e),u(t,e)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,d):[d]}return{exports:t,options:c}}e.a=i},function(t,e,a){"use strict";function i(t,e,i,o){m=i,v=o||{};var r=a.i(c.a)(t,e);return n(r),function(e){for(var i=[],o=0;o<r.length;o++){var s=r[o],l=u[s.id];l.refs--,i.push(l)}e?(r=a.i(c.a)(t,e),n(r)):r=[];for(var o=0;o<i.length;o++){var l=i[o];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete u[l.id]}}}}function n(t){for(var e=0;e<t.length;e++){var a=t[e],i=u[a.id];if(i){i.refs++;for(var n=0;n<i.parts.length;n++)i.parts[n](a.parts[n]);for(;n<a.parts.length;n++)i.parts.push(r(a.parts[n]));i.parts.length>a.parts.length&&(i.parts.length=a.parts.length)}else{for(var o=[],n=0;n<a.parts.length;n++)o.push(r(a.parts[n]));u[a.id]={id:a.id,refs:1,parts:o}}}}function o(){var t=document.createElement("style");return t.type="text/css",p.appendChild(t),t}function r(t){var e,a,i=document.querySelector("style["+x+'~="'+t.id+'"]');if(i){if(m)return g;i.parentNode.removeChild(i)}if(b){var n=f++;i=h||(h=o()),e=s.bind(null,i,n,!1),a=s.bind(null,i,n,!0)}else i=o(),e=l.bind(null,i),a=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else a()}}function s(t,e,a,i){var n=a?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,n);else{var o=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function l(t,e){var a=e.css,i=e.media,n=e.sourceMap;if(i&&t.setAttribute("media",i),v.ssrId&&t.setAttribute(x,e.id),n&&(a+="\n/*# sourceURL="+n.sources[0]+" */",a+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),t.styleSheet)t.styleSheet.cssText=a;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(a))}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var c=a(16),d="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!d)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var u={},p=d&&(document.head||document.getElementsByTagName("head")[0]),h=null,f=0,m=!1,g=function(){},v=null,x="data-vue-ssr-id",b="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase()),w=function(){var t=[];return function(e,a){return t[e]=a,t.filter(Boolean).join("\n")}}()},function(t,e,a){"use strict";function i(t){a(14)}var n=a(0),o=a(12),r=a(4),s=i,l=a.i(r.a)(n.a,o.a,o.b,!1,s,"data-v-07ac33c9",null);e.a=l.exports},function(t,e,a){"use strict";function i(t){a(15)}var n=a(1),o=a(13),r=a(4),s=i,l=a.i(r.a)(n.a,o.a,o.b,!1,s,null,null);e.a=l.exports},function(t,e,a){"use strict";function i(t){for(var e in t)return!1;return!0}e.a=i},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),n=a(7),o={install:function(t){t.component(i.a.name,i.a),t.component(n.a.name,n.a)}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(o),e.default=o},function(t,e,a){e=t.exports=a(3)(!1),e.push([t.i,'.kalix-header[data-v-07ac33c9]{position:fixed;top:0;left:0;width:100%;z-index:9;background-color:#fff}.kalix-header .bd[data-v-07ac33c9]{height:65px}.kalix-header .bd .logo[data-v-07ac33c9]{width:250px;overflow:hidden;transition:width .2s}.kalix-header .bd .logo.small[data-v-07ac33c9]{width:65px}.kalix-header .bd .s-check__label[data-v-07ac33c9]{display:block;cursor:pointer;line-height:32px;height:32px;padding:0 12px;margin-top:16px;margin-left:20px}.kalix-header .bd .mn .menu-main[data-v-07ac33c9]{position:relative;background-color:#fff;border:1px solid #fff;border-top:0;box-sizing:border-box;height:65px;overflow:hidden;flex-flow:column;transition:all .2s}.kalix-header .bd .mn .menu-main .aside-btn[data-v-07ac33c9]{position:absolute;bottom:0;left:0;width:100%;text-align:center;font-size:0;line-height:0;height:10px;display:flex}.kalix-header .bd .mn .menu-main .aside-btn .line[data-v-07ac33c9]{flex:1;background-color:#d8dce5;height:1px}.kalix-header .bd .mn .menu-main .aside-btn .arrow[data-v-07ac33c9]{margin-top:-1px;height:7px;overflow:hidden}.kalix-header .bd .mn .menu-main .aside-btn .arrow .arrow-mn[data-v-07ac33c9]{width:9px;height:9px;margin-top:-4px}.kalix-header .bd .mn .menu-main .aside-btn .arrow .arrow-mn[data-v-07ac33c9]:after{content:"";display:block;width:9px;height:9px;transform:rotate(45deg);border:1px solid #d8dce5;box-sizing:border-box}.kalix-header .bd .mn .menu-main.open[data-v-07ac33c9]{height:min-content;border-color:#352420;border-radius:0 0 5px 5px;box-shadow:1px 1px 5px rgba(0,0,0,.5)}.kalix-header .bd .mn .menu-main.open .aside-btn[data-v-07ac33c9]{height:6px;background-color:#ebebeb}.kalix-header .bd .mn .menu-main.open .aside-btn .arrow[data-v-07ac33c9]{margin-top:-5px;transform:rotate(180deg)}.kalix-header .bd .mn .menu-main.open .aside-btn .arrow .arrow-mn[data-v-07ac33c9]:after{background-color:#ebebeb;border-color:#cdd1da}.kalix-header .bd .mn ul[data-v-07ac33c9]{text-align:left}.kalix-header .bd .mn ul li[data-v-07ac33c9]{display:inline-block;margin:0 10px;cursor:pointer}.kalix-header .bd .mn ul.menu[data-v-07ac33c9]{flex:1;box-sizing:border-box;padding-bottom:16px;height:min-content;min-width:150px}.kalix-header .bd .mn ul.menu li[data-v-07ac33c9]{margin-top:16px}.kalix-header .bd .mn ul.menu li .link-btn[data-v-07ac33c9]{line-height:32px;padding:0 12px;color:#000}.kalix-header .bd .mn ul.menu li .link-btnhover[data-v-07ac33c9]{background-color:#efefef}.kalix-header .bd .mn ul.menu li .link-btn.router-link-active[data-v-07ac33c9]{color:#000}.kalix-header .bd .mn ul.aside[data-v-07ac33c9]{margin-right:20px}.kalix-header .bd .mn ul.aside li[data-v-07ac33c9]{margin-top:5px;vertical-align:top}.kalix-header .bd .mn ul.aside li .el-badge[data-v-07ac33c9]{margin-top:10px}.kalix-header .bd .mn ul.aside .el-dropdown-link[data-v-07ac33c9]{align-items:center;margin-top:12px}.kalix-header .bd .mn ul.aside .el-select[data-v-07ac33c9]{margin-top:10px}.kalix-header .bd .mn ul.aside .el-select .el-icon-caret-bottom.el-icon--right[data-v-07ac33c9]{color:#5d6266}.kalix-header .avatar-wrapper[data-v-07ac33c9]{height:36px;line-height:36px}.kalix-header .avatar-wrapper .avatar[data-v-07ac33c9]{float:left;width:36px;height:36px;border-radius:50%;background-color:transparent;margin-right:10px;box-sizing:border-box}.kalix-header .avatar-wrapper .user-name[data-v-07ac33c9]{float:left;font-size:16px;margin-right:7px}.kalix-header .avatar[data-v-07ac33c9]{background:url("/static/images/default_user.png") 50% 50% no-repeat;background-size:cover;overflow:height}',""])},function(t,e,a){e=t.exports=a(3)(!1),e.push([t.i,'.kalix-navigate{width:250px;height:100%;text-align:left;overflow:hidden;transition:width .2s;z-index:999;overflow-y:auto}.kalix-navigate ul li{width:100%}.kalix-navigate ul li .tit{height:64px;line-height:64px;cursor:pointer}.kalix-navigate ul li .tit_icon{margin-right:12px;font-size:24px}.kalix-navigate ul.bg li .tit{padding-left:22px;padding-right:12px;position:relative;transition:color .5s}.kalix-navigate ul.bg li .arrow,.kalix-navigate ul.bg li .txt{transition:opacity .2s}.kalix-navigate ul.bg li .txt{display:inline-block}.kalix-navigate ul.bg li .arrow{width:12px}.kalix-navigate ul.bg li .mn .tit{padding-left:44px}.kalix-navigate ul.bg li .mn .tit:hover{background-color:#3c4a57;color:#d6d9dc}.kalix-navigate ul.bg li .mn .tit:before{top:0;left:0;bottom:0;width:5px;content:"";position:absolute;display:block;visibility:hidden}.kalix-navigate ul.bg li .mn .tit.active{background-color:#384657;color:#fff}.kalix-navigate ul.bg li .mn .tit.active:before{visibility:visible}.kalix-navigate.small{width:65px;overflow:visible}.kalix-navigate.small li .tit{display:block;position:relative;text-align:center}.kalix-navigate.small li .tit:before{top:0;left:0;bottom:0;width:5px;content:"";position:absolute;display:block;visibility:hidden}.kalix-navigate.small li .tit.active:before{visibility:visible}.kalix-navigate.small li .tit .mn{position:absolute;left:50px;top:0;width:180px;text-align:left;display:none}.kalix-navigate.small li .tit .mn ul li.tit{padding-left:20px;text-align:left;box-sizing:border-box}.kalix-navigate.small li .tit:hover .mn{display:block}',""])},function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kalix-header"},[a("div",{staticClass:"s-flex bd"},[t._m(0),a("div",{staticClass:"s-flex_item s-flex mn"},[a("div",{staticClass:"s-flex_item"},[a("div",{staticClass:"s-flex menu-main"},[a("ul",{ref:"ulMenu",staticClass:"menu"},t._l(t.menuList,function(e){return a("li",[a("router-link",{staticClass:"link-btn",attrs:{tag:"div",to:{path:"/"+e.id}}},[a("i",{class:t.bindClass(e.iconCls)}),t._v(t._s(e.text))])],1)}))])]),a("ul",{staticClass:"aside"},[a("li",[t.msgCount>0?a("el-badge",{attrs:{value:t.msgCount}},[a("el-button",{attrs:{icon:"el-icon-message"},on:{click:t.onMsgClick}},[t._v("消息")])],1):a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{icon:"el-icon-message"},on:{click:t.onMsgClick}},[t._v("消息")])],1),a("li",[a("el-dropdown",{staticStyle:{"margin-top":"10px"},on:{command:t.onFlowCommand}},[a("el-button",[t._v("待办工作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("待办流程")])],1)],1)],1),a("li",[a("el-dropdown",{staticStyle:{"min-width":"120px"},on:{command:t.handleCommand}},[a("div",{staticClass:"s-flex el-dropdown-link"},[a("div",{staticClass:"avatar-wrapper"},[a("div",{staticClass:"avatar",style:t.styleObject}),a("div",{staticClass:"user-name"},[t._v(t._s(t.userName))])]),a("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"changeInfo"}},[t._v("修改个人信息")]),a("el-dropdown-item",{attrs:{command:"changePwd"}},[t._v("修改密码")]),a("el-dropdown-item",{attrs:{command:"logout"}},[t._v("退出")])],1)],1)],1)])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:"/static/images/logo_oa_horizontal.png"}})])}]},function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"kalix-navigate",class:{small:t.menuChk}},[t.menuChk?t._e():a("ul",{staticClass:"bd bg"},t._l(t.treeData,function(e){return a("li",{key:e.id,class:{active:e.isShow}},[a("div",{staticClass:"s-flex tit tit-txt",on:{click:function(a){t.showTree(e,a)}}},[a("div",{staticClass:"s-flex_item"},[a("i",{staticClass:"tit_icon",class:t.bindClass(e.iconCls)}),a("span",{staticClass:"txt"},[t._v(t._s(e.text))])]),a("div",{staticClass:"arrow"},[a("i",{class:t.showIcon(e.isShow)})])]),a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"item.isShow"}],staticClass:"mn"},[a("ul",t._l(e.children,function(e){return a("li",{key:e.id},[a("div",{staticClass:"tit",class:t.currentCls(e),on:{click:function(a){t.selectItem(e)}}},[a("i",{staticClass:"tit_icon",class:t.bindClass(e.iconCls)}),t._v(t._s(e.text))])])}))])])],1)})),t.menuChk?a("ul",{staticClass:"bd samll"},t._l(t.treeData,function(e){return a("li",[a("div",{staticClass:"s-flex tit",class:{active:e.isShow}},[a("i",{staticClass:"tit_icon",class:t.bindClass(e.iconCls)}),a("div",{staticClass:"mn"},[a("div",{staticClass:"txt"},[t._v(t._s(e.text))]),a("ul",t._l(e.children,function(e){return a("li",{key:e.id,staticClass:"tit",on:{click:function(a){t.selectItem(e)}}},[a("i",{staticClass:"tit_icon",class:t.bindClass(e.iconCls)}),t._v(t._s(e.text))])}))])])])})):t._e()])},n=[]},function(t,e,a){var i=a(10);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a(5).default;n("413ca3d7",i,!0,{})},function(t,e,a){var i=a(11);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a(5).default;n("41a6e2a0",i,!0,{})},function(t,e,a){"use strict";function i(t,e){for(var a=[],i={},n=0;n<e.length;n++){var o=e[n],r=o[0],s=o[1],l=o[2],c=o[3],d={id:t+":"+n,css:s,media:l,sourceMap:c};i[r]?i[r].parts.push(d):a.push(i[r]={id:r,parts:[d]})}return a}e.a=i}])});
//# sourceMappingURL=index.js.map